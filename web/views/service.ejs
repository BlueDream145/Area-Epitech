<%- include('includes/header_dashboard') -%>

<!-- Navbar -->
<nav class="main-header navbar navbar-expand navbar-dark navbar-success">
	<!-- Left navbar links -->
	<ul class="navbar-nav">
		<li class="nav-item">
			<a class="nav-link" data-widget="pushmenu" href="#"><i class="fas fa-bars"></i></a>
		</li>
		<li class="nav-item d-none d-sm-inline-block">
			<a href="/dashboard" class="nav-link">Accueil</a>
		</li>
	</ul>
</nav>
<!-- /.navbar -->

<!-- Main Sidebar Container -->
<aside class="main-sidebar sidebar-dark-primary elevation-4">
	<!-- Brand Logo -->
	<a href="" class="brand-link">
		<img src="/images/icon.png" alt="Ecomapper Logo" class="brand-image img-circle elevation-3">
	</a>

	<!-- Sidebar -->
	<div class="sidebar">
		<!-- Sidebar user panel (optional) -->
		<div class="user-panel mt-3 pb-3 mb-3 d-flex">
			<div class="info">
				<a href="#" class="d-block"><%= user %></a>
			</div>
		</div>

		<!-- Sidebar Menu -->
		<nav class="mt-2">
			<ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
				<!-- Add icons to the links using the .nav-icon class
						with font-awesome or any other icon font library -->
				<li class="nav-item">
					<a href="/dashboard" class="nav-link active">
						<i class="nav-icon fas fa-tachometer-alt"></i>
						<p>
							Accueil
						</p>
					</a>
				</li>
				<li class="nav-item">
					<a href="/profil" class="nav-link">
						<i class="nav-icon fas fa-user"></i>
						<p>
							Profil
						</p>
					</a>
				</li>
				<li class="nav-item">
					<a href="logout" class="nav-link">
						<i class="nav-icon fas fa-sign-out-alt"></i>
						<p>
							Deconnection
						</p>
					</a>
				</li>
			</ul>
		</nav>
		<!-- /.sidebar-menu -->
	</div>
	<!-- /.sidebar -->
</aside>
<!-- / Main Sidebar Container -->

<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
	<!-- Content Header (Page header) -->
	<div class="content-header">
		<div class="container-fluid">
			<div class="row mb-2">
				<div class="col-sm-6">
					<h1 class="m-0 text-dark"><%= service[id].Name %></h1>
				</div><!-- /.col -->
				<div class="col-sm-6">
					<ol class="breadcrumb float-sm-right">
						<a class="btn btn-primary" href="/service/disconnect/<%= service[id].Id%>">Logout</a>
					</ol>
				</div><!-- /.col -->
			</div><!-- /.row -->
		</div><!-- /.container-fluid -->
	</div>
	<!-- /.content-header -->

	<!-- Main content -->
	<section class="content">
		<div class="container-fluid">
			<div class="container">
				<div class="row justify-content-center">
					<img class="img-lg" src="/images/<%= service[id].Name %>.png" alt="<%= service[id].Name %>">
					<h3> </h3>
				</div>
			</div>
			<div class="container">
				<div class="row justify-content-center">
					<h3><%= service[id].Description%> </h3>
				</div>
			</div>
			<% if (service[id].Registered == true) {%>
				<% if (service[id].Name == "Gmail") { %>
					<div class="row justify-content-center">
					<div class="col-md-9">
						<div class="card card-primary card-outline">
							<div class="card-header">
								<h3 class="card-title">Nouveau mail</h3>
							</div>
							<form class="hero-form" action="/actions/7/12 %>" method="post">
								<div class="card-body">
									<div class="form-group">
										<input class="form-control" name="params" id="params" placeholder="Destinataire:">
									</div>
									<div class="form-group">
										<input class="form-control" name="content" id="content" placeholder="Suject:">
									</div>
									<div class= "form-group">
										<textarea class="form-control" name="message" id="message" style="height: 300px;" >
										</textarea>
									</div>
								</div>
								<div class="card-footer">
									<div class="float-right">
										<button type="submit" class="btn btn-primary"><i class="far fa-envelope">Envoyer</i></button>
									</div>
								</div>
							</form>
						</div>
					</div>
					</div>
				<% } else {%>
			<div class="row justify-content-around">
				<div class="col-6">
					<div class="card">
						<div class="card-body table-responsive p-0" style="height: 200px;">
							<table class="table tqble-head-fixed text-nowrap">
								<thead>
									<tr>
										<th>Actions</th>
										<th></th>
									</tr>
								</thead>
								<tbody>
									<% for (let i =0; service[id].Actions[i] != null; i++) {%>
										<% if (service[id].Actions[i].Id == 4 || service[id].Actions[i].Id == 6
												|| service[id].Actions[i].Id == 3 || service[id].Actions[i].Id == 10
												|| service[id].Actions[i].Id == 13 || service[id].Actions[i].Id == 1) { %>
											<tr>
												<td><%=  service[id].Actions[i].Name%></td>
												<td>
													<form class="hero-form rounded" action="/actions/<%=  service[id].Id%>/<%=  service[id].Actions[i].Id %>" method="post">
														<input type="params" class="rounded" id="params" name="params" placeholder="">
														<button type="submit" class="site-btn sb-green pull-right">Valider</button>
													</form>
												</td>
											</tr>
										<% } else if (service[id].Actions[i].Id == 16) { %>
											<tr>
												<td><%=  service[id].Actions[i].Name%></td>
												<td>
													<form class="hero-form rounded" action="/actions/<%=  service[id].Id%>/<%=  service[id].Actions[i].Id %>"
														method="post">
														<input type="params" class="rounded" id="params" name="params" placeholder="Titre">
														<input type="content" class="rounded" id="content" name="content" placeholder="Contenu">
														<button type="submit" class="site-btn sb-green pull-right">Valider</button>
													</form>
												</td>
											</tr>
										<% } else { %>
											<tr>
												<td><%=  service[id].Actions[i].Name%></td>
												<td>
													<a href="/actions/<%=  service[id].Id%>/<%=  service[id].Actions[i].Id%>"
														class="btn btn-sm btn-primary float-left"> </a>
												</td>
											</tr>
										<% } %>
									<% } %>
								</tbody>
							</table>
						</div>
					</div>
				</div>
				<div class="col-6">
					<div class="card">
						<!-- <div class="card-header">
								<h3 class="card-title">Reactions</h3>
								<div class="Card-tools">
									<button type="button" class="btn btn-tool" data-card-widget="collapse" data-toggle="tooltip"
										title="Reduire">
										<i class="fas fa-minus"></i></button>
								</div>
							</div> -->
						<div class="card-body table-responsive p-0" style="height: 200px;">
							<table class="table tqble-head-fixed text-nowrap">
								<thead>
									<tr>
										<th>Reactions</th>
									</tr>
								</thead>
								<tbody>
									<% for (let i =0; service[id].Reactions[i] != null; i++) {%>
									<tr>
										<td><%=  service[id].Reactions[i].Name%></td>
										<td>
											<a href="/reactions/<%=  service[id].Id%>/<%=  service[id].Actions[i].Id%>" class="btn btn-sm btn-primary float-left"> </a>
										</td>
									</tr>
									<% } %>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
			<% } %>
			<%- include('weather') -%>
			<%- include('currency') -%>
			<%- include('news') -%>
			<%- include('steam') -%>
			<%- include('whois') -%>
			<%- include('dailymotion') -%>
			<%- include('pastebin') -%>
			<%- include('imgur')-%>
			<%- include('gmail')-%>
			<% } else { %>
			<div class="container">
				<div class="row justify-content-md-center">
					<div class="col-lg-6">
						<form class="hero-form rounded" action="/service/<%= service[id].Id %>" method="post">
							<h2>Connexion</h2>
							<input type="username" class="rounded" id="username" name="username" placeholder="Username"
								autofocus>
							<input type="password" class="rounded" id="Password" name="password"
								placeholder="Mot de passe">
							<button type="submit" class="site-btn sb-green pull-right">Valider</button>
						</form>
					</div>
				</div>
			</div>
			<% } %>
		</div><!-- /.container-fluid -->
	</section>
	<!-- /.content -->
</div>


<%- include('includes/footer_dashboard') -%>